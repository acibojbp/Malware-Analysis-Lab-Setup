# Malware Analysis Lab Setup

## FlareVM Installation Guide

This guide will walk you through setting up a Windows 10 virtual machine (VM) and installing FlareVM for malware analysis.

### Requirements:

- A Windows 10 VM with at least 60 GB of hard disk space (recommended: 80 GB)
- Local admin account username with no spaces or special characters
- Internet connection

### Preparation:

**Install Windows 10 VM**: Ensure your VM meets the above requirements.

**Disable Windows Updates**:

- Search for `Services.msc` and open it.

![FlareVM-01](https://github.com/acibojbp/Malware-Analysis-Lab-Setup/assets/164168280/58cd04b1-042d-4998-9265-58d8a83ce245)

- Locate `Windows Update`, right-click and select `Stop`.

![FlareVM-02](https://github.com/acibojbp/Malware-Analysis-Lab-Setup/assets/164168280/dc4de84e-3cdd-465e-b08a-9afa5842a696)
  
- Right-click again and select `Properties`.

- Under `Startup type`, choose `Disabled.`

![FlareVM-03](https://github.com/acibojbp/Malware-Analysis-Lab-Setup/assets/164168280/cb226ade-4f92-48bd-8f90-c562688096c9)

- Click `Apply` and `OK.`

**Disable Tamper Protection and Anti-Malware**:

- Open Windows Security and navigate to `Virus & Threat Protection > Manage settings.`

- Disable all options.

![FlareVM-04](https://github.com/acibojbp/Malware-Analysis-Lab-Setup/assets/164168280/da51597c-6017-4964-9d71-8ee6f54afd66)


**Using Group Policy (recommended)**:

- Search for `gpedit.msc` and open it.

![FlareVM-05](https://github.com/acibojbp/Malware-Analysis-Lab-Setup/assets/164168280/5505d098-c839-4677-92ce-0ef8e26e3be8)

- Navigate to: `Computer Configuration > Administrative Templates > Windows Components > Microsoft Defender Antivirus > Real-time Protection`

- Enable `Turn off real-time protection`.

![FlareVM-06](https://github.com/acibojbp/Malware-Analysis-Lab-Setup/assets/164168280/0ca3ab98-2dbf-46e1-a2c6-724f6577f575)

- For permanent Microsoft Defender disablement, navigate to:

`Computer Configuration > Administrative Templates > Windows Components > Microsoft Defender Antivirus`

- Enable `Turn off Microsoft Defender Antivirus`.

![FlareVM-07](https://github.com/acibojbp/Malware-Analysis-Lab-Setup/assets/164168280/a0240c0b-29b3-4b96-b1c6-7395bcf0c7c1)

- Restart the virtual machine.

**Create a VM Snapshot**: Take a snapshot of your VM in case of installation issues.

### FlareVM Installation

- Refer to the official FlareVM GitHub page for detailed installation instructions and troubleshooting: https://github.com/mandiant/flare-vm

![FlareVM-08](https://github.com/acibojbp/Malware-Analysis-Lab-Setup/assets/164168280/111ff5c1-c2bd-4ecb-a8a9-b56d73572c03)

- After running the required scripts, when you encounter the GUI, you'll be prompted to select the tools you wish to install. Simply click the right arrow to install all available tools.

![FlareVM-09](https://github.com/acibojbp/Malware-Analysis-Lab-Setup/assets/164168280/fed9d023-f98f-4ede-a3ca-1dc50c4128e3)

![FlareVM-10](https://github.com/acibojbp/Malware-Analysis-Lab-Setup/assets/164168280/b76fb139-61b7-445a-9c4c-c40ef4bd9f6c)

- The installation duration varies based on the number of selected tools. Once complete, press Enter to exit the script. 

> Note: If any tools fail to install, you can manually install them later if required.

![FlareVM-11](https://github.com/acibojbp/Malware-Analysis-Lab-Setup/assets/164168280/b8d378da-66be-4792-804b-53fa78f5d1e2)

- Next, navigate to File Explorer, click on `View`, and check the box labeled `File name extensions` and `Hidden items`.

![FlareVM-12](https://github.com/acibojbp/Malware-Analysis-Lab-Setup/assets/164168280/42498398-30ca-4452-b232-dc582fd8316b)

- Lastly, before proceeding to handle malware, ensure that you set the VirtualBox network adapter to either `Host-only adapter` or `Internal network`. Additionally, take a snapshot for safety.

> Note: This guide provides a basic overview of VM preparation. The official FlareVM documentation offers comprehensive installation steps.

## REMnux Installation Guide

This guide walks you through installing REMnux on your system using the pre-configured virtual appliance for a more straightforward setup.

### Requirements:

- Virtualization software compatible with your system (e.g., VirtualBox)
- Internet connection

### Steps:

**Download REMnux Virtual Appliance:**

- Head over to the REMnux website: https://docs.remnux.org/
- Look for the "Get the Virtual Appliance" section: https://docs.remnux.org/install-distro/get-virtual-appliance.
- Download the .ova file. Save it somewhere you can easily find it.

**Verify Download Integrity (Optional):**

-Downloading the virtual appliance directly from the REMnux website reduces the risk of getting a corrupted file. However, verifying the downloaded file's integrity using hashes is an optional security best practice.
-If you want to perform verification, refer to the REMnux documentation for specific instructions on hash verification methods applicable to your operating system.

![REMnux-01](https://github.com/acibojbp/Malware-Analysis-Lab-Setup/assets/164168280/87790485-2bdc-4864-adce-47e5a5817483)

**Import the Virtual Appliance into VirtualBox:**

Two ways to do this:

- Open VirtualBox
- Click `File` -> `Import Appliance` and browse to your downloaded `.ova` file.
- OR (if it works on your system) double-click the downloaded `.ova` file. VirtualBox should automatically open it.

**Start the REMnux Virtual Machine:**

- Once the import finishes, you'll see REMnux listed in VirtualBox.
- Click the "Start" button (the green arrow) to boot up REMnux.

![REMnux-02](https://github.com/acibojbp/Malware-Analysis-Lab-Setup/assets/164168280/ef6cd2ce-1698-435c-b0d8-b4200086e956)

**Keep the Distro Up to Date:**

- On first startup, on the terminal.
- Run `remnux upgrade` followed by `remnux update`.
- For detailed instructions, refer to: https://docs.remnux.org/install-distro/keep-the-distro-up-to-date.

**Take a Snapshot:**

- Before tackling any malware, take a snapshot of the REMnux virtual machine to ensure you can revert to a clean state if needed
- Additionally, ensure that the network adapter in VirtualBox is set to either `Host-only adapter` or `Internal network` for security purposes, so any potential threats are contained within the virtual environment.

> Additional Notes:  
> The REMnux documentation provides comprehensive details and configuration options for REMnux: https://docs.remnux.org/  
> Ensure your virtualization software meets REMnux system requirements (x86/amd64 architecture).  
